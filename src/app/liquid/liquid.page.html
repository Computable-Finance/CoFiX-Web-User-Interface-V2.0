<ion-content [fullscreen]="true">
  <app-header [activeId]="'liquid'" (onRefresh)="refreshPage()"></app-header>
  <app-liquid-input class="liquid-input" (onChangeCoin)="changeCoin($event)" [coin]="toCoin.id" *ngIf="!showAddModel && !showRedemtionModel"></app-liquid-input>
  <ion-card class="swap-card" *ngIf="!showAddModel && !showRedemtionModel">
    <div class="card-content">
      <app-card-title [cardTitle]="'liquidpool_title'" [cardSubTitle]="'liquidpool_desc'" ></app-card-title>
      <app-taken-info [infoTitle]="'liquidpool_xtoken'" [token]="'XTokens'" [tokenBalance]="todoValue[toCoin.id]"> </app-taken-info>

      <ion-grid class="ion-no-padding">
        <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
          <ion-col class="label" size="8">{{'liquidpool_eth' | translate}}
          </ion-col>
          <ion-col class="ion-text-right number" size="4">{{ETHAmountForRemoveLiquidity[toCoin.id] |
          truncate:'--'}}
          </ion-col>
        </ion-row>
        <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
          <ion-col class="label" size="8">
            <div translate="liquidpool_token" [translateParams]="{token: toCoin.id}"></div>
          </ion-col>
          <ion-col class="ion-text-right number" size="4">{{tokenAmountForRemoveLiquidity[toCoin.id] | truncate:'--'}}
          </ion-col>
        </ion-row>
      </ion-grid> 
      <div class="button-div">
        <ion-button expand="block" class="operation-btn approve-btn full-btn" (click)="addLiquid(toCoin.id)">
          <div class="ion-button-label">
            {{'liquidpool_add' | translate}}
          </div>
        </ion-button>
      </div>
      <div class="button-outline">
        <ion-button fill="outline" class="operation-btn approve-btn full-btn" (click)="redemption(toCoin.id)">
          <div class="ion-button-label">
            {{'liquidpool_withdraw' | translate}}
          </div>
        </ion-button>
      </div>
    </div>
  </ion-card>
  
  <ng-container *ngIf="(!showAddModel && !showRedemtionModel)">
    <ng-container *ngFor="let coinItem of coinList">
      <ion-card class="swap-card liquid-info">
        <!--*ngIf="showLiquidInfo && !showRedemtionModel"-->
        <div class="card-content motoken">
          <ion-grid class="mtoken_banner">
            <ion-row class="ion-align-items-center ion-align-self-center  earned-rate" 
                (click)="showMore(coinItem)">
              <ion-col size="2" class="token_icon_col" *ngIf="isDisplay()">
                <img class="ETH_icon" src="./assets/images/icon/ETH.png" />

                <img
                  class="token_icon"
                  src="./assets/images/icon/{{coinItem}}.png"
                />
              </ion-col>
              <ion-col class="ion-text-left">ETH-{{coinItem}}</ion-col>
              <ion-col
                size="{{colSize}}"
                class="ion-text-right"
              >
                <span class="balance"
                  >{{earnedRate[coinItem]?.rewardRate | truncate:'--'}} CoFi/Day</span
                >
                <img
                  src="./assets/images/select.png"
                  class="pull_img"
                  [ngClass]="{'rotate':isRotate[coinItem]}"
              /></ion-col>
            </ion-row>
          </ion-grid>
          <ng-container *ngIf="isRotate[coinItem]">
            <app-explain-liquid
              [todoValue]="todoValue[coinItem]"
              [NAVPerShare]="NAVPerShare[coinItem]"
              [hadValue]="hadValue[coinItem]"
              [coin]="coinItem"
            ></app-explain-liquid>
            <div
              class="button-div"
              *ngIf="shareStateQuery.getValue().connectedWallet"
            >
              <ion-button
                expand="block"
                class="operation-btn approve-btn small-btn"
                (click)="addLiquid(coinItem)"
              >
                <div class="ion-button-label">{{'add' | translate}}</div>
              </ion-button>
              <ion-button
                fill="outline"
                class="operation-btn small-btn"
                (click)="redemption(coinItem)"
              >
                <div class="ion-button-label">{{'sh' | translate}}</div>
              </ion-button>
            </div>
          </ng-container>
        </div>
      </ion-card>
    </ng-container>
  </ng-container>

  <app-add-liquid
    #addLiquidView
    *ngIf="showAddModel"
    [pairAttended]="pairAttended"
    [coin]="selectCoin"
    (onClose)="closeAddLiquid($event)"
  ></app-add-liquid>
  <app-redeem-liquid
    #redeemLiquidView
    *ngIf="showRedemtionModel"
    (onClose)="closeRedeemLiquid($event)"
    [coin]="selectCoin"
  ></app-redeem-liquid>

  <app-warning-liquid></app-warning-liquid>
  <app-banner
    [bannerConent]="liquidContent"
  ></app-banner>

</ion-content>
<app-footer (onRefresh)="refreshPage()"></app-footer>
