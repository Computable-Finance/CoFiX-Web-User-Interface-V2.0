<ion-content [fullscreen]="true">
  <app-header [activeId]="'income'" (onRefresh)="refreshPage()"></app-header>
  <ng-container *ngIf="!isShowModal">

  <ion-card class="swap-card">
    <div class="card-content">
      <app-card-title [cardTitle]="'income_card_title'" [cardSubTitle]="'income_desc'"></app-card-title>
  
      <app-taken-info [infoTitle]="'klq'" [token]="profitCoin" [tokenBalance]="cofiStakingRewards"> </app-taken-info>
  
      <div class="count">
        <div class="explain-div">
          <ion-grid class="ion-no-padding">
            <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
              <ion-col class="label" size="8">{{'kcr_text' | translate}}
              </ion-col>
              <ion-col class="ion-text-right number" size="4">{{cofiToken | truncate:'--'}}
              </ion-col>
            </ion-row>
            <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
              <ion-col class="label" size="8">{{'income_swap_fee' | translate}}<img class="alert-icon"
                  src="./assets/images/question.png" (click)="showAlert('ygck','ygck_cont')" />
  
              </ion-col>
              <ion-col class="ion-text-right number" size="4">** ETH
              </ion-col>
            </ion-row>
            <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
              <ion-col class="label" size="10">{{'income_dividend_percent' | translate}}<img class="alert-icon"
                  src="./assets/images/question.png" (click)="showAlert('ygck','ygck_cont')" />
  
              </ion-col>
              <ion-col class="ion-text-right  number" size="2">20%
              </ion-col>
            </ion-row>
            <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
              <ion-col class="label" size="10">{{'income_saving_percent' | translate}}<img class="alert-icon"
                  src="./assets/images/question.png" (click)="showAlert('ygck','ygck_cont')" />
  
              </ion-col>
              <ion-col class="ion-text-right number" size="2">80%
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </div>
      <div class="button-div">
        <ion-button expand="block" class="operation-btn approve-btn full-btn" (click)="showModal('deposit')">
          <div class="ion-button-label">
            {{'income_deposit_btn' | translate}}
          </div>
        </ion-button>
      </div>
      <div class="button-outline">
        <ion-button fill="outline" class="operation-btn approve-btn full-btn" (click)="showModal('withdraw')">
          <div class="ion-button-label">
            {{'income_withdraw_btn' | translate}}
          </div>
        </ion-button>
      </div>
    </div>
  </ion-card>
-->
  <ion-card class="swap-card">
    <div class="card-content">
  
      <app-card-title [cardTitle]="'income_claim_title'" [cardSubTitle]="'income_claim_desc'"></app-card-title>
      <app-taken-info [infoTitle]="'klq'" [token]="'ETH'" [tokenBalance]="earnedETH"> </app-taken-info>
  
      <ion-grid class="ion-no-padding">
        <ion-row class="ion-align-items-center ion-align-self-center conversionPrice">
          <ion-col class="label" size="4">{{'income_claim_already'|translate}}</ion-col>
          <ion-col class="ion-text-right number" size="8">** ETH
          </ion-col>
        </ion-row>
        <ion-row class="ion-align-items-center ion-align-self-center conversionPrice" *ngIf="receiveError.isError">
          <ion-col class="error" size="12">{{'transaction-error' | translate}}[{{receiveError.msg}}]</ion-col>
        </ion-row>
      </ion-grid>
    </div>
    <div class="button-div connect-card" *ngIf="shareStateQuery.getValue().connectedWallet">
      <ion-button expand="block" class="operation-btn full-btn" [disabled]="!canReceive" (click)="receiveETH()">
        <div class="ion-button-label">
          {{'lq_text' | translate}}
          <div class="loading" *ngIf="isLoading"></div>
        </div>
      </ion-button>
    </div>
  </ion-card>
  <app-banner [bannerConent]="incomeContent" class="desc_line"></app-banner>
  </ng-container>
  <ng-container *ngIf="isShowModal">
  <ion-card class="swap-card">
    <img src="./assets/images/left-arrow.png" class="close-img"  (click)="cancel('deposit')">
    <div class="card-content">
      <app-card-title [cardTitle]="profit.title" [cardSubTitle]="profit.subtitle"></app-card-title>
      <app-income-profit [todoLabel]="'kcr_text'" [hadLabel]="'ycr_text'" [todoValue]="cofiToken" [hadValue]="cofiStakingRewards"
        [isApproved]="isApproved" [balance]="balance" [isLoading]="isLoadingProfit" (onApprove)="approveCofi($event)"
        (onSave)="saveCofi($event)" (onRecieve)="receiveCofi($event)" (onCoinInputChange)="resetReceiveError()"
        (onSetCoinMax)="resetReceiveError()" [profitCoin]="profitCoin" [transcationError]="incomeError" [isDeposit]="profit.isDeposit">
      </app-income-profit>
    </div>
  </ion-card>
  </ng-container> 
</ion-content>
<app-footer (onRefresh)="refreshPage()"></app-footer>
